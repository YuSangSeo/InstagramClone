# Migration `20201006170825-init`

This migration has been generated by YuSangSeo at 10/7/2020, 2:08:25 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE `Comment` DROP FOREIGN KEY `Comment_ibfk_2`

ALTER TABLE `Comment` DROP FOREIGN KEY `Comment_ibfk_1`

ALTER TABLE `File` DROP FOREIGN KEY `File_ibfk_1`

ALTER TABLE `Like` DROP FOREIGN KEY `Like_ibfk_2`

ALTER TABLE `Like` DROP FOREIGN KEY `Like_ibfk_1`

ALTER TABLE `Message` DROP FOREIGN KEY `Message_ibfk_2`

ALTER TABLE `Message` DROP FOREIGN KEY `Message_ibfk_1`

ALTER TABLE `Post` DROP FOREIGN KEY `Post_ibfk_1`

ALTER TABLE `_FollowRelation` DROP FOREIGN KEY `_FollowRelation_ibfk_1`

ALTER TABLE `_FollowRelation` DROP FOREIGN KEY `_FollowRelation_ibfk_2`

ALTER TABLE `_RoomToUser` DROP FOREIGN KEY `_RoomToUser_ibfk_1`

ALTER TABLE `_RoomToUser` DROP FOREIGN KEY `_RoomToUser_ibfk_2`

ALTER TABLE `Comment` DROP PRIMARY KEY,
    MODIFY `id` varchar(191) NOT NULL,
    MODIFY `userId` varchar(191) NOT NULL,
    MODIFY `postId` varchar(191) NOT NULL,
    ADD PRIMARY KEY (`id`)

ALTER TABLE `File` DROP PRIMARY KEY,
    MODIFY `id` varchar(191) NOT NULL,
    MODIFY `postId` varchar(191) NOT NULL,
    ADD PRIMARY KEY (`id`)

ALTER TABLE `Like` DROP PRIMARY KEY,
    MODIFY `id` varchar(191) NOT NULL,
    MODIFY `userId` varchar(191) NOT NULL,
    MODIFY `postId` varchar(191) NOT NULL,
    ADD PRIMARY KEY (`id`)

ALTER TABLE `Message` DROP PRIMARY KEY,
    MODIFY `id` varchar(191) NOT NULL,
    MODIFY `userId` varchar(191) NOT NULL,
    MODIFY `roomId` varchar(191) NOT NULL,
    ADD PRIMARY KEY (`id`)

ALTER TABLE `Post` DROP PRIMARY KEY,
    MODIFY `id` varchar(191) NOT NULL,
    MODIFY `userId` varchar(191) NOT NULL,
    ADD PRIMARY KEY (`id`)

ALTER TABLE `Room` DROP PRIMARY KEY,
    MODIFY `id` varchar(191) NOT NULL,
    ADD PRIMARY KEY (`id`)

ALTER TABLE `User` DROP PRIMARY KEY,
    MODIFY `id` varchar(191) NOT NULL,
    ADD PRIMARY KEY (`id`)

ALTER TABLE `_FollowRelation` MODIFY `A` varchar(191) NOT NULL,
    MODIFY `B` varchar(191) NOT NULL

ALTER TABLE `_RoomToUser` MODIFY `A` varchar(191) NOT NULL,
    MODIFY `B` varchar(191) NOT NULL

ALTER TABLE `Comment` ADD FOREIGN KEY (`userId`) REFERENCES `PrismaPractice`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `Comment` ADD FOREIGN KEY (`postId`) REFERENCES `PrismaPractice`.`Post`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `File` ADD FOREIGN KEY (`postId`) REFERENCES `PrismaPractice`.`Post`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `Like` ADD FOREIGN KEY (`userId`) REFERENCES `PrismaPractice`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `Like` ADD FOREIGN KEY (`postId`) REFERENCES `PrismaPractice`.`Post`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `Message` ADD FOREIGN KEY (`userId`) REFERENCES `PrismaPractice`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `Message` ADD FOREIGN KEY (`roomId`) REFERENCES `PrismaPractice`.`Room`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `Post` ADD FOREIGN KEY (`userId`) REFERENCES `PrismaPractice`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `_FollowRelation` ADD FOREIGN KEY (`A`) REFERENCES `PrismaPractice`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `_FollowRelation` ADD FOREIGN KEY (`B`) REFERENCES `PrismaPractice`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `_RoomToUser` ADD FOREIGN KEY (`A`) REFERENCES `PrismaPractice`.`Room`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `_RoomToUser` ADD FOREIGN KEY (`B`) REFERENCES `PrismaPractice`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201005192023-init..20201006170825-init
--- datamodel.dml
+++ datamodel.dml
@@ -3,14 +3,14 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 model User {
-  id Int  @default(autoincrement()) @id
+  id String  @id @default(cuid())
   username  String @unique
   email String @unique
   firstName String?  @default(value:"")
   lastName  String? @default(value:"")
@@ -23,9 +23,9 @@
   rooms Room[]
 }
 model Post {
-  id Int  @default(autoincrement()) @id
+  id String  @id @default(cuid())
   user  User
   files File[]
   location  String
   caption String
@@ -33,34 +33,34 @@
   comments  Comment[]
 }
 model Like{
-  id Int  @default(autoincrement()) @id
+  id String  @id @default(cuid())
   user  User
   post  Post
 }
 model Comment{
-  id Int  @default(autoincrement()) @id
+  id String  @id @default(cuid())
   text  String
   user  User
   post  Post
 }
 model File {
-  id Int  @default(autoincrement()) @id
+  id String  @id @default(cuid())
   url String
   post  Post
 }
 model Room {
-  id Int  @default(autoincrement()) @id
+  id String  @id @default(cuid())
   participants  User[]
   messages  Message[]
 }
 model Message {
-  id Int  @default(autoincrement()) @id
+  id String  @id @default(cuid())
   text  String
   from  User  @relation(name:"From")
   // to  User  @relation(name:"To")
   room  Room
```


