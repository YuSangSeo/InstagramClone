# Migration `20201005174639-init`

This migration has been generated by YuSangSeo at 10/6/2020, 2:46:39 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `Post` (
`id` int  NOT NULL  AUTO_INCREMENT,
`createdAt` datetime(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
`title` varchar(191)  NOT NULL ,
`content` varchar(191)  ,
`published` boolean  NOT NULL DEFAULT false,
`authorId` int  NOT NULL ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `Profile` (
`id` int  NOT NULL  AUTO_INCREMENT,
`bio` varchar(191)  ,
`userId` int  NOT NULL ,
UNIQUE INDEX `Profile.userId_unique`(`userId`),
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `User` (
`id` int  NOT NULL  AUTO_INCREMENT,
`email` varchar(191)  NOT NULL ,
`name` varchar(191)  ,
UNIQUE INDEX `User.email_unique`(`email`),
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `Post` ADD FOREIGN KEY (`authorId`) REFERENCES `PrismaPractice`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `Profile` ADD FOREIGN KEY (`userId`) REFERENCES `PrismaPractice`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201005174354-init..20201005174639-init
--- datamodel.dml
+++ datamodel.dml
@@ -3,142 +3,29 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 model Post {
-  id          String        @id
-  userId      String
-  updatedAt   DateTime      @default(now())
-  createdAt   DateTime      @default(now())
-  title       String
-  content     String
-  views       Int           @default(0)
-  todayViews  Int           @default(0)
-  User        User          @relation(fields: [userId], references: [id])
-  postComment postComment[]
-  postImage   postImage[]
-
-  @@index([userId], name: "userId")
-}
-
-model User {
-  id            String          @id
-  createdAt     DateTime        @default(now())
-  updatedAt     DateTime        @default(now())
-  avatar        String?         @default("http://s3.amazonaws.com/redqteam.com/isomorphic-reloaded-image/profilepic.png")
-  password      String
-  name          String
-  phone         String          @unique
-  permit        Boolean         @default(true)
-  auth          Int             @default(0)
-  Market        Market[]
-  Post          Post[]
-  marketComment marketComment[]
-  postComment   postComment[]
-  shopComment   shopComment[]
-}
-
-model Market {
-  id            String          @id
-  userId        String
-  updatedAt     DateTime        @default(now())
-  createdAt     DateTime        @default(now())
-  title         String
-  content       String
-  views         Int             @default(0)
-  todayViews    Int             @default(0)
-  User          User            @relation(fields: [userId], references: [id])
-  marketComment marketComment[]
-  marketImage   marketImage[]
-
-  @@index([userId], name: "userId")
-}
-
-model Shop {
-  id          String        @id
-  updatedAt   DateTime      @default(now())
-  createdAt   DateTime      @default(now())
-  title       String
-  content     String
-  views       Int           @default(0)
-  todayViews  Int           @default(0)
-  shopComment shopComment[]
-  shopImage   shopImage[]
-}
-
-model marketComment {
-  id        String   @id
-  userId    String
+  id        Int      @default(autoincrement()) @id
   createdAt DateTime @default(now())
-  updatedAt DateTime @default(now())
-  text      String
-  marketId  String
-  Market    Market   @relation(fields: [marketId], references: [id])
-  User      User     @relation(fields: [userId], references: [id])
-
-  @@index([marketId], name: "marketId")
-  @@index([userId], name: "userId")
+  title     String
+  content   String?
+  published Boolean  @default(false)
+  author    User     @relation(fields: [authorId], references: [id])
+  authorId  Int
 }
-
-model marketImage {
-  id        String   @id
-  createdAt DateTime @default(now())
-  updatedAt DateTime @default(now())
-  url       String
-  marketId  String?
-  Market    Market?  @relation(fields: [marketId], references: [id])
-
-  @@index([marketId], name: "marketId")
+model Profile {
+  id     Int     @default(autoincrement()) @id
+  bio    String?
+  user   User    @relation(fields: [userId], references: [id])
+  userId Int     @unique
 }
-
-model postComment {
-  id        String   @id
-  userId    String
-  createdAt DateTime @default(now())
-  updatedAt DateTime @default(now())
-  text      String
-  postId    String
-  Post      Post     @relation(fields: [postId], references: [id])
-  User      User     @relation(fields: [userId], references: [id])
-
-  @@index([postId], name: "postId")
-  @@index([userId], name: "userId")
-}
-
-model postImage {
-  id        String   @id
-  createdAt DateTime @default(now())
-  updatedAt DateTime @default(now())
-  url       String
-  postId    String
-  Post      Post     @relation(fields: [postId], references: [id])
-
-  @@index([postId], name: "postId")
-}
-
-model shopComment {
-  id        String   @id
-  userId    String
-  createdAt DateTime @default(now())
-  updatedAt DateTime @default(now())
-  text      String
-  shopId    String
-  Shop      Shop     @relation(fields: [shopId], references: [id])
-  User      User     @relation(fields: [userId], references: [id])
-
-  @@index([shopId], name: "shopId")
-  @@index([userId], name: "userId")
-}
-
-model shopImage {
-  id        String   @id
-  createdAt DateTime @default(now())
-  updatedAt DateTime @default(now())
-  url       String
-  shopId    String
-  Shop      Shop     @relation(fields: [shopId], references: [id])
-
-  @@index([shopId], name: "shopId")
-}
+model User {
+  id      Int      @default(autoincrement()) @id
+  email   String   @unique
+  name    String?
+  posts   Post[]
+  profile Profile?
+}
```


