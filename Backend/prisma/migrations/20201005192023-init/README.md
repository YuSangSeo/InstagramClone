# Migration `20201005192023-init`

This migration has been generated by YuSangSeo at 10/6/2020, 4:20:23 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `Room` (
`id` int  NOT NULL  AUTO_INCREMENT,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `Message` (
`id` int  NOT NULL  AUTO_INCREMENT,
`text` varchar(191)  NOT NULL ,
`userId` int  NOT NULL ,
`roomId` int  NOT NULL ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `_RoomToUser` (
`A` int  NOT NULL ,
`B` int  NOT NULL ,
UNIQUE INDEX `_RoomToUser_AB_unique`(`A`,
`B`),
INDEX `_RoomToUser_B_index`(`B`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `Message` ADD FOREIGN KEY (`userId`) REFERENCES `PrismaPractice`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `Message` ADD FOREIGN KEY (`roomId`) REFERENCES `PrismaPractice`.`Room`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `_RoomToUser` ADD FOREIGN KEY (`A`) REFERENCES `PrismaPractice`.`Room`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `_RoomToUser` ADD FOREIGN KEY (`B`) REFERENCES `PrismaPractice`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201005183305-init..20201005192023-init
--- datamodel.dml
+++ datamodel.dml
@@ -3,33 +3,11 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
-// model Post {
-//   id        Int      @default(autoincrement()) @id
-//   createdAt DateTime @default(now())
-//   title     String
-//   content   String?
-//   published Boolean  @default(false)
-//   author    User     @relation(fields: [authorId], references: [id])
-//   authorId  Int
-// }
-// model Profile {
-//   id     Int     @default(autoincrement()) @id
-//   bio    String?
-//   user   User    @relation(fields: [userId], references: [id])
-//   userId Int     @unique
-// }
-// model User {
-//   id      Int      @default(autoincrement()) @id
-//   email   String   @unique
-//   name    String?
-//   posts   Post[]
-//   profile Profile?
-// }
 model User {
   id Int  @default(autoincrement()) @id
   username  String @unique
@@ -41,8 +19,9 @@
   follower  User[]  @relation(name:"FollowRelation")
   posts Post[]
   likes Like[]
   comments  Comment[]
+  rooms Room[]
 }
 model Post {
   id Int  @default(autoincrement()) @id
@@ -72,4 +51,17 @@
   url String
   post  Post
 }
+model Room {
+  id Int  @default(autoincrement()) @id
+  participants  User[]
+  messages  Message[]
+}
+
+model Message {
+  id Int  @default(autoincrement()) @id
+  text  String
+  from  User  @relation(name:"From")
+  // to  User  @relation(name:"To")
+  room  Room
+}
```


